#!/bin/bash
# Pre-push hook for NovaChat
# Runs full local quality gates before push.

set -euo pipefail

echo "Running pre-push checks..."

if [ ! -f "gradlew" ]; then
  echo "gradlew not found"
  exit 1
fi

chmod +x gradlew

./gradlew :app:assembleDebug :feature-ai:testDebugUnitTest --no-daemon

if [ -d "functions" ]; then
  (cd functions && npm run build && npm run lint && npm test)
fi

if [ -f "package.json" ]; then
  npm run format:check
fi

echo "Pre-push checks passed"
